<%inherit file="main.html" />
<%namespace name='static' file='static_content.html'/>

<%!
  from django.utils.translation import ugettext as _
  from django.core.urlresolvers import reverse
  from microsite_configuration import microsite
  from courseware.courses import course_image_url, get_course_about_section
%>

<%
  homepage_overlay_html = microsite.get_value('homepage_overlay_html')

  #show_homepage_promo_video = microsite.get_value('show_homepage_promo_video', True)
  #homepage_promo_video_youtube_id = microsite.get_value('homepage_promo_video_youtube_id', "jkIOi5bCMSo")
  show_homepage_promo_video = True
  homepage_promo_video_youtube_id = "WyVzE0RaQMo"

  show_partners = microsite.get_value('show_partners', True)
%>


% if show_homepage_promo_video:

<!-- Video modal -->
<div class="modal fade modal__video-fullscreen__wrapper" id="videoModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal__video-fullscreen">
    <div class="modal__video-fullscreen__container">
      <iframe src='https://www.youtube.com/embed/${homepage_promo_video_youtube_id}?rel=0&showinfo=0' frameborder="0" allowfullscreen></iframe>
    </div>
    <div class="modal__video-fullscreen__close">
      <a href="#" data-dismiss="modal" aria-label="Close"><i class="fa fa-remove"></i></a>
    </div>
  </div>
</div>

% endif


<!-- LMS landing page hero portion -->
  <section class="landing-hero">
    <div class="container-bs">
      <div class="landing-hero__content">
        <div class="landing-hero__content__text">
          <h1>Welcome to <br>CommCare Academy!</h1>
          <p>The online learning center for Commcare</p>
        </div>

        % if show_homepage_promo_video:

          <a href="#" data-toggle="modal" data-target="#videoModal" class="landing-hero__content__button">View a sample video</a>

        % endif
      </div>
    </div>
  </section>

  <section class="landing-additional-text">
    <div class="container-bs">
      <div class="landing-additional-text__content">
        <h2>About Commcare Academy</h2>
          <div class="landing-additional-text__separator"></div>
          <p>CommCare Academy is an online learning resource for CommCare materials, based on the EdX e-learning platform. It also contains tests that are necessary if you want to become Certified in any CommCare project role.</p>
          <p>For more information about Commcare please click below to visit our website:</p>
          <a class="landing-additional-text__button" href="http://www.commcarehq.org" target="_blank">Commcare Website</a>
      </div>
    </div>
  </section>


% if settings.FEATURES.get('COURSES_ARE_BROWSABLE'):
  <section class="landing-courses">
    <div class="container-bs">
      <h2>Featured / newest courses</h2>
    </div>

    <div class="landing-courses__container">
      <div class="container-bs">
        <div class="row">
          <div class="landing-courses__logo"><img src="${static.url('themes/' + settings.FEATURES.get('THEME_FOLDER') + '/images/icon-black.svg')}"></div>
        </div>
        <div class="row">
          %for course in courses[:settings.HOMEPAGE_COURSE_MAX]:
            <div class="col-xs-12 col-sm-6 col-md-4 course-tile">
              <div class="course-tile__body">
                <div class="course-tile__image" style="background-image: url('${course_image_url(course)}'); background-size: cover; background-position: center center;"></div>
                <div class="course-tile__info">
                  <span class="course-tile__date">${course.start_datetime_text()}</span>
                  <span class="course-tile__name"><a href="${reverse('about_course', args=[course.id.to_deprecated_string()])}">${get_course_about_section(course, 'title')}</a></span>
                  <span class="course-tile__instructor">${get_course_about_section(course, 'university')}</span>
                  <div class="course-tile__separator"></div>
                  <p class="course-tile__description">${get_course_about_section(course, 'short_description')}</p>
                  <a class="course-tile__cta" href="${reverse('about_course', args=[course.id.to_deprecated_string()])}">Learn more...</a>
                </div>
              </div>
            </div>
          %endfor
        </div>
      </div>
    </div>
  </section>
% endif

<%block name="js_extra">
   <script type="text/javascript">
      $(window).load(function() {
         if(getParameterByName('next')) {
              $('#login').trigger("click");
         }
      })
   </script>
</%block>

% if show_signup_immediately is not UNDEFINED:
  ## NOTE: This won't work in production, because anonymous views are cached, so it will
  ## show either with or without this extra js for 3 minutes at a time.
<script type="text/javascript">
  $(window).load(function() {$('#signup_action').trigger("click");});
</script>
% endif
